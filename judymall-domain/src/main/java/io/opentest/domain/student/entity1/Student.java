package io.opentest.domain.student.entity1;

import lombok.AccessLevel;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.NoArgsConstructor;

import java.util.Set;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.persistence.Table;

@Entity(name = "Student1")
@Table(name = "T1_STUDENT")
@Builder
@NoArgsConstructor
@AllArgsConstructor(access = AccessLevel.PROTECTED)
public class Student {

    @Id
    private Long id;

    /**
     * 테이블명, 컬럼명을 지정해 주기위해서 @JoinTable을 사용한다.<br/>
     * &#064;JoinColumn에서 foreignKey지정은 따로 하지 않겠다. 최초 테이블 생성시에 생성된 그것을 쓰면 되니까. 외래키 네이밍에 대해서는 관여하지 말자.
     *
     * @see <a href="https://medium.com/@SlackBeck/jpa-joincolumns-사용시-주의-사항-7bc22b98ed9b">@JoinColumns 사용시 주의사항</a>
     * @see <a href="https://jeong-pro.tistory.com/231">JPA 연관관계 정리</a>
     */
    @ManyToMany
    @JoinTable(
            name = "T1_COURSE_REGISTRATION",
            joinColumns = @JoinColumn(name = "student_id", referencedColumnName = "id"),
            inverseJoinColumns = @JoinColumn(name = "course_id", referencedColumnName = "id"))
    private Set<Course> courses;

    private String name;
}
